# TSUMIDOKU Manager (積読マネージャー)

「積読（つみどく）」を管理し、読書習慣をサポートするためのWebアプリケーションです。
購入したけれど読んでいない本、読んでいる途中の本、読み終わった本を視覚的に管理できます。

## 📖 概要

TSUMIDOKU Managerは、以下の機能を提供します：

- **書籍の登録**: タイトル、著者、総ページ数、表紙画像、メモを登録できます。
- **ステータス管理**: 「未読」「読書中」「既読」の3つのステータスで進行状況を管理します。
- **進捗管理**: 読書中の本にはプログレスバーが表示され、現在のページ数を記録できます。
- **自動完了機能**: 読んだページ数が総ページ数に達すると、自動的にステータスが「既読」になります。
- **後から編集**: メモや総ページ数は後からモーダル画面で編集可能です。
- **美しいUI**: カードスタイルのデザイン、レスポンシブ対応、直感的な操作感。

## 🛠 技術スタック

### フロントエンド

- **HTML/EJS**: テンプレートエンジンを使用した動的なページ生成。
- **CSS (Native Nesting)**: モダンブラウザのCSS Nesting機能を使用した、SCSSライクな効率的なスタイリング。
- **JavaScript (Vanilla)**: `fetch` APIを使用した非同期通信（登録、更新、削除）。
- **FontAwesome**: アイコンフォント。

### バックエンド

- **Node.js**: ランタイム環境。
- **Express**: Webフレームワーク。RESTfulなAPI設計とビューのレンダリングを両立。
- **Multer**: 画像アップロード処理。

### データベース

- **MySQL**: 書籍データの永続化。
- **mysql2**: PromiseベースのMySQLドライバ。

## ⚙️ セットアップ手順

### 前提条件

- Node.js (v14以上推奨)
- MySQL Server

### インストール

1. **リポジトリのクローン**

    ```bash
    git clone <repository-url>
    cd kadai06
    ```

2. **依存パッケージのインストール**

    ```bash
    npm install
    ```

3. **データベースの準備**
   `database/db.js` を開き、MySQLの接続設定（ユーザー名、パスワード）を環境に合わせて修正してください。

    ```javascript
    // database/db.js
    const dbConfig = {
        host: 'localhost',
        user: 'root',
        password: '', // ご自身の環境に合わせて設定
        database: 'tsumidoku',
    };
    ```

4. **データベースの初期化**
   以下のコマンドを実行して、データベースとテーブルを作成します。
   ※ 既存のデータがある場合、初期化スクリプトの動作によってはデータが影響を受ける可能性があるため注意してください。

    ```bash
    node database/init.js
    ```

5. **アプリケーションの起動**
    ```bash
    npm run dev
    ```
    `http://localhost:3000` にアクセスしてください。

## 📂 ディレクトリ構成

```
.
├── app.js               # アプリケーションのエントリーポイント
├── database/
│   ├── db.js            # DB接続設定
│   └── init.js          # DB初期化スクリプト
├── public/
│   ├── css/
│   │   └── style.css    # スタイルシート (CSS Nesting使用)
│   └── uploads/         # 書籍画像の保存先
├── views/
│   ├── add.ejs          # 書籍登録画面
│   └── index.ejs        # ダッシュボード（一覧）画面
└── package.json
```

## 💡 こだわりポイント

- **英語ベースのデータ管理**: データベースのENUM値は `unread`, `reading`, `read` と英語で管理し、表示時に「未読」「読書中」「既読」とマッピングしています。これにより国際化対応が容易です。
- **CSS Nesting**: プリプロセッサ（Sass等）を使わずに、標準CSSの機能だけで階層構造を表現し、可読性を高めています。
- **インタラクティブなUI**: ページ遷移を伴わずにステータス更新や編集ができるよう、非同期通信とDOM操作を組み合わせています。
